<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="admin/head :: head"></head>
<body id="page-top">

<!-- Page Wrapper -->
<div id="wrapper">
	<ul th:replace="admin/sidebar :: sidebar"></ul>
	<!-- Content Wrapper -->
	<div id="content-wrapper" class="d-flex flex-column">
		<!-- Main Content -->
		<div id="content">
			<nav th:replace="admin/toolbar :: toolbar"></nav>
			<nav th:replace="admin/categories :: categories"></nav>
		</div>
		<!-- End of Main Content -->
		<div th:replace="admin/footer :: footer"></div>
	</div>
	<!-- End of Content Wrapper -->
</div>
<!-- End of Page Wrapper -->

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
	<i class="fas fa-angle-up"></i>
</a>

<div th:replace="admin/logoutModal :: logoutModal"></div>
<!-- Bootstrap core JavaScript-->
<script src="https://code.jquery.com/jquery-3.4.0.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!-- Core plugin JavaScript-->
<script th:src="@{/js/jquery.easing.min.js}"></script>

<!-- Custom scripts for all pages-->
<script th:src="@{/js/sb-admin-2.min.js}"></script>

<!-- Page level plugins -->
<script th:src="@{/js/jquery.dataTables.min.js}"></script>
<script th:src="@{/js/dataTables.bootstrap4.min.js}"></script>

<!-- Page level custom scripts -->
<script th:src="@{/js/datatables-demo.js}"></script>
<script type="text/javascript">
    var isChecked = false
	// change status check off all box with action select all items or cancel
	$("#selectAll").change(function(event) {
        isChecked = !isChecked;
        $("input:checkbox").prop('checked', isChecked)
    });

    $("#btnDeleteAll").on("click", function (event) {
        var selected = [];
        $('td input:checked').each(function() {
            var id = parseInt($(this).attr('id'), 10);
            selected.push({ "id" : id});
        });
        if(selected.length > 0) {
            var isConfirmed = confirm()
			if(isConfirmed) {
                console.log(JSON.stringify({'list' : selected}))
                $.ajax({
                    url: '/api/v1/deleteCategory',
                    dataType: 'json',
                    type: 'POST',
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify({'list' : selected}),
                    success: function( data, textStatus, jQxhr ){
                        var updateStatus = $("#updateStatus");
                        updateStatus.empty()
                        updateStatus.append("<span>Xóa thành công</span>")
                        window.location.reload();
                    },
                    error: function( jqXhr, textStatus, errorThrown ){
                        console.log( errorThrown );
                    }
                });
			}
		} else {
            alert("Bạn phải chọn ít nhất một sản phẩm để khi xóa")
		}
    })

</script>
</body>

</html>